# **图像文件搜索应用**

**1. 简介**

这个应用是一个基于 Python 的图像文件搜索工具，旨在帮助用户在给定的目录中快速查找和浏览图像文件。它提供了多种功能，包括局部搜索、全局搜索、目录浏览和图像预览等，为用户提供了便捷的图像文件管理和查找方式。

**2. 功能特点**

- **目录浏览与图像索引**：用户可以通过浏览目录选择需要索引的图像文件的目录。应用会递归遍历该目录及其子目录中的图像文件，并根据 [图片命名规范](#jump1) 将其自动分类并索引到内存中，以便后续的搜索操作。【需要注意的是对于索引图片的格式默认设置成.png，也可以通过应用更改默认图片格式，但是每次检索只对一种格式的图片进行索引（可添加多种格式）】。
  + **界面示例**：用户可以看到一个清晰的目录结构图，便于理解当前索引状态和目录层级。
  + ![image-20240420100323761](D:\source_python\Index_search\assets\image-20240420100323761.png)
  + **格式调整功能**：用户可以自定义索引的图像格式，如从默认的.png 格式更改为.jpg 或其他格式，应用会记住用户的这一偏好，使其适用于后续的索引过程。
  + ![image-20240420100505209](D:\source_python\Index_search\assets\image-20240420100505209.png)


- **局部搜索**：用户可以选中部分类别，在局部索引框文件名进行搜索。应用会根据用户提供的信息在内存索引中查找匹配的图像文件，并在找到时显示其路径和图像预览。文件夹内图片索引完毕后在界面上更新为目录，鼠标点击类别视为选中该类别，根据图像命名规范，选中‘类别 k’，局部搜索‘类别 k+1-类别 k+1-···-图片名’即可完成搜索。
  + **选中类别**：界面上显示的类别可点击，选择后应用即在该类别中搜索用户指定的文件名。
  + ![image-20240420100402015](D:\source_python\Index_search\assets\image-20240420100402015.png)
    以上图片即为选中小麦类。
  + 局部搜索模块：
    ![image-20240420100526532](D:\source_python\Index_search\assets\image-20240420100526532.png)
- **全局搜索**：用户可以输入完整的文件名【按照 [图像命名规范](#jump1) 的不带格式后缀的全名】进行全局搜索。应用会在整个内存索引中搜索匹配的图像文件，并在找到时显示其路径和图像预览。这为用户提供了一种快速定位特定图像文件的方式。
  + 全局搜索模块：
    ![image-20240420101712184](D:\source_python\Index_search\assets\image-20240420101712184.png)
- **图像预览**：提供了一个图像查看器，用户可以在找到的图像文件上双击，即可查看大图。预览界面还包括图像导航、自动播放等功能，增强了用户体验。图片查看界面提供了基本的图像操作功能，包括上一张、下一张、自动播放等，使用户能够更直观地浏览图像文件。
  + **导航控件**：用户可以通过导航控件浏览相邻的图像，方便在查找结果中进行快速切换。
  + ![image-20240420101833181](D:\source_python\Index_search\assets\image-20240420101833181.png)
  + **自动播放**：用户可以设置自动播放的时间间隔，适合进行快速浏览。
  + ![image-20240420101857546](D:\source_python\Index_search\assets\image-20240420101857546.png)
- 使用示例：![7i1lp-vl39s](D:\source_python\Index_search\assets\7i1lp-vl39s.gif)

**3. 实现细节**

- **图像索引**：应用利用 Python 的 os 模块递归遍历目录中的文件，并根据图像文件的命名规范将其索引到内存中的数据结构中。每个图像文件名以类别信息和文件名组成，类别间用指定的分隔符隔开。

- **搜索算法**：利用索引的文件创建的 treeview 视图，进行树搜索算法同时进行字符串匹配，根据用户输入的类别和文件名，在内存索引中进行匹配查找。找到匹配的图像文件后，应用会返回其路径和预览。

- **友好的用户交互设计**：应用利用 Python 的 PIL（Python Imaging Library）库打开图像文件，并通过 tkinter 库在应用中展示图像预览。在本应用中，PIL 的主要用途是打开和处理图像文件。通过 PIL，应用可以支持多种图像格式，如 JPEG, PNG, BMP 等，使得用户能够处理几乎所有常见类型的图像文件。tkinter 是 Python 的标准 GUI（图形用户界面）库，它提供了一套易于使用的工具来构建简单而有效的 GUI 应用。在本应用中，tkinter 负责创建和管理图像预览窗口及其各种控件。

**4. 使用注意事项**

- <span id="jump1"> **图像命名规范** </span>：为了正常索引和搜索图像文件，请按照规定的命名格式输入图像文件名，即类别 1-类别 2-...-类别 n-图片名称。例如："cat-dog-1.png"。

- 在进行任何搜索操作前，请先选择并索引一个具体的目录，以初始化图像数据库。

**5. 总结**

这个图像文件搜索应用提供了简单而有效的方式来管理和查找图像文件，具有直观的用户界面和方便的操作流程，为用户提供了便捷的图像文件管理和查找方式。它的功能丰富、操作简单，适用对图像文件进行管理和查找的需求。

